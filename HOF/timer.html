<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer</title>

    <style>
        #second_div {
            display: none;
            border: 1px solid black;
            width: max-content;
            padding: 0.5em;
            margin: 15px auto;
        }
        
        #form {
            margin: auto;
            border: 2px solid black;
            width: max-content;
            padding: 1em;
        }
    </style>
</head>

<body>

    <div id="container">
        <form action="" id="form">
            <h3>Enter time you want to set timer: </h3>
            <input type="text" placeholder="Follwed by : (hh:mm:ss)" id="time" />
            <input type="submit" value="Set Time" id="">
        </form>

        <div id="second_div">
            <h3 id="h3"></h3>
            <button id="start">Start</button>
            <button id="stop">Stop</button>
            <button id="reset">Reset</button>
        </div>
    </div>

</body>

<script>
    var form = document.getElementById("form").addEventListener("submit", lets_work);

    function lets_work(event) {
        let set;
        event.preventDefault();

        var time_input = document.getElementById("time").value;

        var time = time_input.split(":");
        if (time.length !== 3) {
            alert("Please enter in a valid format");
        } else {
            clearInterval(set);
            var [hh, mm, ss] = [Number(time[0]), Number(time[1]), Number(time[2])];
            var second_div = document.getElementById("second_div");
            second_div.style = "display: block;"

            h3.innerHTML = `${time[0]} hh ${time[1]} mm ${time[2]} ss`;

            var start = document.getElementById("start");

            start.addEventListener("click", () => {
                set = setInterval(display, 1000);
            })

            var stop = document.getElementById("stop");
            stop.addEventListener("click", () => {
                // console.log("stop clicked")
                clearInterval(set);
            })

            var reset = document.getElementById("reset");
            reset.addEventListener("click", () => {
                // console.log("reset clicked")
                clearInterval(set);
                second_div.style.display = "none";
            })

            function display() {
                console.log("start");
                // console.log(ss, mm, hh)

                ss--;
                if (ss < 0) {
                    mm--;
                    ss = 60;
                    if (mm < 0) {
                        hh--;
                        mm = 60;
                        if (hh == 0) {
                            clearInterval(setInterval);
                            h3.textContent = "Times up!";
                        }
                    }
                }

                h3.textContent = `${hh} hh ${mm} mm ${ss} ss`;
            }

        }
    }
</script>

</html>